{% extends "base.html" %}

{% block title %}Mon compte {% endblock %}

{% block body %}

<div class="channel">
    <div class="container-fluid account-header">
        <div class="row">
            <h1>
                {{ user.username }}
            </h1>

        </div>
    </div>


    <div class="content-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="channel-details">
                        <div class="row">
                            <div class="col-lg-10 col-lg-offset-2 col-xs-12">
                                <div class="c-details">

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Featured Videos -->
                    <div class="content-block">
                        <div class="cb-header">
                            <div class="row">
                                <div class="col-lg-8 col-xs-6">
                                    <div class="btn-group bg-clean">
                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        </button>
                                        <div class="col-lg-2 col-sm-2 col-xs-4">
                                            <div class="btn-group pull-right bg-clean">
                                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    Filtrer par <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a onclick="getProductsAndRender('views')"><i
                                                            class="cv cvicon-cv-calender"></i>
                                                        Popularité</a></li>
                                                    <li><a onclick="getProductsAndRender('date')"><i
                                                            class="cv cvicon-cv-calender"></i>
                                                        Récent</a></li>
                                                </ul>
                                            </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cb-content articlelist">
                            <div class="row">
                                {% for article in articles %}
                                <div class=" col-lg-3 col-sm-6 articleitem">
                                    <div class="b-article">
                                        <div class="v-img">
                                            <a
                                                    href="{{ ('/product/' ~ article.id) }}"><img
                                                    src="{{ ('/storage/' ~ article.picture) }}" alt=""></a>
                                        </div>
                                        <div class="v-desc">
                                            <a href="{{ ('/product/' ~ article.id) }}">{{ article.name }}</a>
                                            <button>x<script>
                                                // Gestionnaire d'événements pour les boutons de suppression
                                                document.querySelectorAll('button[type="submit"]').forEach(button => {
                                                    button.addEventListener('click', event => {
                                                        event.preventDefault();
                                                        if (confirm('Êtes-vous sûr de vouloir supprimer cet article ?')) {
                                                            const formId = button.parentNode.parentNode.querySelector('form').id;
                                                            document.getElementById(formId).submit();
                                                        }
                                                    });
                                                });
                                            </script></button>
                                        </div>
                                        <div class="v-views">
                                            {{article.views}} vues
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <!-- /Featured Videos -->
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
